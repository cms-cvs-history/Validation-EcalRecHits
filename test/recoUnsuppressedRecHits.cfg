process EcalLocalReco = {

  untracked PSet maxEvents = {untracked int32 input = -1}

  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  # geometry (Only Ecal+Hcal geometry)
  include "Geometry/CaloEventSetup/test/data/testCaloConfiguration.cfi"
 
  source = PoolSource 
  { 
    untracked vstring fileNames = {"file:reco-application-ecal-digitization.root"}
  }

  #ECAL LocalReco sequence 
  # Calo geometry service model
  include "Geometry/CaloEventSetup/data/CaloGeometry.cff"

  #ECAL conditions
  include "CalibCalorimetry/EcalTrivialCondModules/data/EcalTrivialCondRetriever.cfi"

  #ECAL reconstruction
  include "RecoLocalCalo/EcalRecProducers/data/ecalWeightUncalibRecHit.cfi"
  replace ecalWeightUncalibRecHit.EBdigiCollection = ecalUnsuppressedDigis
  replace ecalWeightUncalibRecHit.EEdigiCollection = ecalUnsuppressedDigis
  include "RecoLocalCalo/EcalRecProducers/data/ecalRecHit.cfi"
  include "RecoLocalCalo/EcalRecProducers/data/ecalPreshowerRecHit.cfi"
  replace ecalPreshowerRecHit.ESdigiCollection = ecalUnsuppressedDigis

  sequence ecalLocalRecoSequence = { ecalWeightUncalibRecHit, ecalRecHit , ecalPreshowerRecHit }
  

  module out = PoolOutputModule 
  {
    untracked string fileName = "reco-application-ecal-localreco.root"
  }
                                                 
  path p = 
  {
     ecalLocalRecoSequence	
  }

  endpath e = 
  {
    out
  }
}
