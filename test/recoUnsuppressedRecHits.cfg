process EcalLocalReco = {

  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  # geometry (Only Ecal+Hcal geometry)
  include "Geometry/CaloEventSetup/test/data/testCaloConfiguration.cfi"
 
  source = PoolSource 
  { 
    untracked vstring fileNames = {"file:reco-application-ecal-digitization.root"}
    untracked int32 maxEvents = -1
  }

  #ECAL LocalReco sequence 
  # Calo geometry service model
  include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"

  #ECAL conditions
  include "CalibCalorimetry/EcalTrivialCondModules/data/EcalTrivialCondRetriever.cfi"

  #ECAL reconstruction
  include "RecoLocalCalo/EcalRecProducers/data/ecalWeightUncalibRecHit.cfi"
  replace ecalWeightUncalibRecHit.digiProducer = "ecalUnsuppressedDigis"
  replace ecalWeightUncalibRecHit.EBdigiCollection = ""
  replace ecalWeightUncalibRecHit.EEdigiCollection = ""
  include "RecoLocalCalo/EcalRecProducers/data/ecalRecHit.cfi"
  include "RecoLocalCalo/EcalRecProducers/data/esRecHit.cfi"
  replace esRecHit.digiProducer = "ecalUnsuppressedDigis"

  sequence ecalLocalRecoSequence = { ecalWeightUncalibRecHit, ecalRecHit , esRecHit }
  

  module out = PoolOutputModule 
  {
    untracked string fileName = "reco-application-ecal-localreco.root"
  }
                                                 
  path p = 
  {
     ecalLocalRecoSequence	
  }

  endpath e = 
  {
    out
  }
}
